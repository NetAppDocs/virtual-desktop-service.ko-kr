---
sidebar: sidebar 
permalink: Deploying.GCP.vds_v5.4_prerequisites.html 
summary: GCP 및 VDS 사전 요구 사항 
---
= Google Compute Platform(GCP) 및 VDS 사전 요구 사항
:allow-uri-read: 




== GCP 및 VDS 요구 사항 및 참고 사항

이 문서에서는 VDS(NetApp 가상 데스크톱 서비스)를 사용하여 RDS(원격 데스크톱 서비스)를 배포하는 데 필요한 요소에 대해 설명합니다. "빠른 점검 목록"에서는 효율적인 배포를 위해 필요한 구성 요소 및 배포 전 단계에 대한 간단한 목록을 제공합니다. 이 가이드의 나머지 부분에서는 선택한 구성에 따라 각 요소에 대해 더 자세히 설명합니다.

image:ReferenceArchitectureGCPRDS.png["너비 = 75%"]



== 빠른 점검 목록



=== GCP 요구사항

* GCP 테넌트
* GCP 프로젝트
* 소유자 역할이 할당된 서비스 계정




=== 배포 전 정보

* 총 사용자 수를 결정합니다
* GCP 지역 및 지역을 결정합니다
* Active Directory 유형을 확인합니다
* 스토리지 유형을 확인합니다
* 세션 호스트 VM 이미지 또는 요구 사항을 식별합니다
* 기존 GCP 및 온프레미스 네트워킹 구성을 평가합니다




== VDS 배포 세부 요구 사항



=== 최종 사용자 연결 요구 사항

.다음 원격 데스크톱 클라이언트는 GCP에서 RDS를 지원합니다.
* link:https://docs.netapp.com/us-en/virtual-desktop-service/Reference.end_user_access.html#overview["Windows용 NetApp VDS 클라이언트"]
+
** Windows 아웃바운드 URL 안전 상장용 NetApp VDS 클라이언트 요구 사항
+
*** api.cloudworkspace.com
*** vdsclient.app
*** api.vdsclient.app
*** bin.vdsclient.app


** 향상된 기능:
+
*** VDS 필요할 때 깨우기를 사용합니다
*** ThinPrint 클라이언트 및 lice ning
*** 셀프 서비스 암호 재설정
*** 자동 서버 및 게이트웨이 주소 협상
*** 완벽한 데스크탑 및 스트리밍 애플리케이션 지원
*** 사용 가능한 사용자 지정 브랜딩
*** 자동 배포 및 구성을 위한 설치 관리자 스위치
*** 문제 해결 도구가 내장되어 있습니다




* link:https://login.cloudworkspace.com/["NetApp VDS 웹 클라이언트"]
* link:https://docs.microsoft.com/en-us/windows-server/remote/remote-desktop-services/clients/remote-desktop-clients["Microsoft RD 클라이언트"]
+
** Windows
** macOS
** ISO
** Android


* 타사 소프트웨어 및/또는 씬 클라이언트
+
** 요구 사항: RD 게이트웨이 구성을 지원합니다






==== 지원합니다

VDS에서 배포된 RDS의 경우 저장소 전략은 AVD 세션 VM에 영구 사용자/회사 데이터가 없도록 설계되었습니다. 사용자 프로필, 사용자 파일 및 폴더, 회사/애플리케이션 데이터에 대한 영구 데이터는 독립 데이터 계층에서 호스팅되는 하나 이상의 데이터 볼륨에 호스팅됩니다.

FSLogix는 세션 초기화 시 사용자 프로필 컨테이너(VHD 또는 VHDX 형식)를 세션 호스트에 마운트하여 데이터 스프롤 및 느린 로그인과 같은 다양한 사용자 프로필 문제를 해결하는 프로파일 컨테이너화 기술입니다.

이 아키텍처로 인해 데이터 저장 기능이 필요합니다. 이 기능은 사용자의 상당 부분이 동시에 로그인/로그오프하는 경우 매일 아침/오후에 필요한 데이터 전송을 처리할 수 있어야 합니다. 중간 규모의 환경에서도 상당한 데이터 전송 요구사항이 있을 수 있습니다. 데이터 스토리지 계층의 디스크 성능은 기본 최종 사용자 성능 변수 중 하나이므로 스토리지 용량뿐만 아니라 스토리지 성능의 크기를 적절하게 조정할 수 있도록 특별히 주의를 기울여야 합니다. 일반적으로 스토리지 계층의 크기는 사용자당 5-15 IOPS를 지원하도록 조정해야 합니다.



==== 네트워킹

* 필수: * VPN을 통해 GCP 프로젝트에 표시되는 서브넷을 포함하여 기존의 모든 네트워크 서브넷의 인벤토리. 배포는 중복되는 서브넷을 피해야 합니다.

VDS 설정 마법사를 사용하면 기존 네트워크와의 계획된 통합의 일부로 필요한 범위 또는 피해야 할 범위가 있는 경우 네트워크 범위를 정의할 수 있습니다.

배포 중에 사용자에게 IP 범위를 결정합니다. 모범 사례에 따라 전용 범위의 IP 주소만 지원됩니다.

.지원되는 선택 항목은 다음과 같지만 기본적으로 A/20 범위입니다.
* 192.168.0.0 ~ 192.168.255.255
* 172.16.0.0 ~ 172.31.255.255
* 10.0.0.0 ~ 10.255.255.255




==== CWMGR1

비용 절감 워크로드 스케줄링 및 라이브 확장 기능과 같은 VDS의 고유한 기능 중 일부는 조직 및 프로젝트 내에서 관리 기능을 필요로 합니다. 따라서 CWMGR1이라는 관리 VM은 VDS 설정 마법사 자동화의 일부로 배포됩니다. 이 VM은 VDS 자동화 작업 외에도 SQL Express 데이터베이스, 로컬 로그 파일 및 DCConfig라는 고급 구성 유틸리티에서 VDS 구성을 유지합니다.

.VDS 설정 마법사에서 선택한 항목에 따라 이 VM을 사용하여 다음을 포함한 추가 기능을 호스팅할 수 있습니다.
* RDS 게이트웨이
* HTML 5 게이트웨이
* RDS 라이센스 서버입니다
* 도메인 컨트롤러




=== 배포 마법사의 의사 결정 트리 구조

초기 배포의 일부로 새로운 환경에 대한 설정을 사용자 지정하기 위한 일련의 질문에 대한 답변이 제공됩니다. 다음은 결정해야 할 주요 결정 사항에 대한 개요입니다.



==== GCP 지역

VDS 가상 컴퓨터를 호스팅할 GCP 지역 또는 지역을 결정합니다. 이 지역은 최종 사용자와 이용 가능한 서비스에 근접하여 선택해야 합니다.



==== 데이터 스토리지

사용자 프로필, 개별 파일 및 회사 공유에 대한 데이터를 배치할 위치를 결정합니다. 선택 가능한 항목은 다음과 같습니다.

* GCP용 Cloud Volumes Service
* 기존 파일 서버




== NetApp VDS 배포 요구 사항(기존 구성 요소에 대한 배포 요구 사항)



=== 기존 Active Directory 도메인 컨트롤러를 사용한 NetApp VDS 배포

이 구성 유형은 기존 Active Directory 도메인을 확장하여 RDS 인스턴스를 지원합니다. 이 경우 VDS는 RDS 구성 요소에 대한 자동 프로비저닝 및 관리 작업을 지원하기 위해 제한된 구성 요소 집합을 도메인에 배포합니다.

.이 구성에는 다음이 필요합니다.
* 일반적으로 GCP에서 생성된 VPN 또는 도메인 컨트롤러를 통해 GCP VPC 네트워크의 VM에서 액세스할 수 있는 기존 Active Directory 도메인 컨트롤러입니다.
* 도메인에 가입되어 있는 RDS 호스트 및 데이터 볼륨의 VDS 관리에 필요한 VDS 구성 요소 및 사용 권한 추가. 배포 프로세스를 수행하려면 도메인 권한이 있는 도메인 사용자가 필요한 요소를 만드는 스크립트를 실행해야 합니다.
* VDS 배포는 기본적으로 VDS에서 생성된 VM에 대해 VPC 네트워크를 생성합니다. VPC 네트워크는 기존 VPC 네트워크를 통해 피어링하거나 CWMGR1 VM을 필요한 서브넷이 미리 정의된 기존 VPC 네트워크로 이동할 수 있습니다.




==== 자격 증명 및 도메인 준비 도구

관리자는 배포 프로세스의 특정 시점에 도메인 관리자 자격 증명을 제공해야 합니다. 임시 도메인 관리자 자격 증명은 나중에 생성, 사용 및 삭제할 수 있습니다(배포 프로세스가 완료되면). 또는 필수 구성 요소 구축에 도움이 필요한 고객은 도메인 준비 도구를 활용할 수 있습니다.



=== 기존 파일 시스템을 사용한 NetApp VDS 배포

VDS는 사용자 프로필, 개인 폴더 및 기업 데이터를 RDS 세션 호스트에서 액세스할 수 있도록 하는 Windows 공유를 생성합니다. VDS는 기본적으로 파일 서버를 배포하지만 기존 파일 저장소 구성 요소가 있는 경우 VDS 배포가 완료되면 VDS가 해당 구성 요소에 공유를 지정할 수 있습니다.

.및 기존 스토리지 구성요소를 사용하기 위한 요구사항:
* 이 구성 요소는 SMB v3을 지원해야 합니다
* 구성 요소는 RDS 세션 호스트와 동일한 Active Directory 도메인에 연결해야 합니다.
* 구성 요소는 VDS 구성에서 사용할 UNC 경로를 노출할 수 있어야 합니다. 즉, 세 공유 모두에 대해 하나의 경로를 사용하거나 각 경로에 대해 별도의 경로를 지정할 수 있습니다. VDS는 이러한 공유에 대한 사용자 수준 권한을 설정하고 VDS Automation Services에 적절한 권한이 부여되었는지 확인합니다.




== 부록 A: VDS 컨트롤 플레인 URL 및 IP 주소

GCP 프로젝트의 VDS 구성 요소는 VDS 웹 응용 프로그램 및 VDS API 끝점을 포함하여 Azure에서 호스팅되는 VDS 글로벌 컨트롤 플레인 구성 요소와 통신합니다. 액세스하려면 포트 443에서 양방향 액세스에 대해 다음 기본 URI 주소를 안전 목록에 추가해야 합니다.

link:api.cloudworkspace.com[""]
link:autoprodb.database.windows.net[""]
link:vdctoolsapi.trafficmanager.net[""]
link:cjbootstrap3.cjautomate.net[""]

액세스 제어 장치가 IP 주소로만 안전 목록만 할 수 있는 경우 다음 IP 주소 목록을 안전하게 나열해야 합니다. VDS는 이중화된 공용 IP 주소가 있는 로드 밸런서를 사용하므로 시간이 지남에 따라 이 목록이 변경될 수 있습니다.

13.67.190.243 13.67.215.62 13.89.50.122 13.67.227.115 13.67.227.230 13.67.227.227 23.136.91 40.122.119.157 40.78.132.166 40.78.129.17 40.122.167 40.147.2 40.147.2 40.86.86.86.86.86.86.86.86.86.0.1622.1752.1722.17.22.172.17.22.116.22.118.22.1722.172.116.22.118.22.118.22.118.22.172.118.17.22.118.22.118.22.118.17.22.118.22.172.118.22.118.22.118.22.118.22.



=== 최적의 성능 요소

최적의 성능을 위해 네트워크가 다음 요구 사항을 충족하는지 확인하십시오.

* 클라이언트 네트워크에서 세션 호스트가 구축된 GCP 영역까지의 RTT(Round-Trip) 지연 시간은 150ms 미만이어야 합니다.
* 데스크톱 및 앱을 호스팅하는 VM이 관리 서비스에 연결되면 네트워크 트래픽이 국가/지역 경계 외부로 흐를 수 있습니다.
* 네트워크 성능을 최적화하기 위해 세션 호스트의 VM이 관리 서비스와 동일한 영역에 배치되도록 권장합니다.




=== 지원되는 가상 머신 OS 이미지

VDS에서 배포된 RDS 세션 흐트는 다음 x64 운영 체제 이미지를 지원합니다.

* Windows Server 2019
* Windows Server 2016
* Windows Server 2012 R2

