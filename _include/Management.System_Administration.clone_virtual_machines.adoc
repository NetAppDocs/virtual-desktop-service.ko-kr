= 개요




== 개요

VDS(가상 데스크톱 서비스)는 기존 가상 머신(VM)을 복제할 수 있는 기능을 제공합니다. 이 기능은 정의된 사용자 수가 증가하거나 사용 가능한 리소스 풀에 서버를 추가할 때 서버 유닛 수 가용성을 자동으로 높이도록 설계되었습니다.

관리자는 다음 두 가지 방법으로 VDS에서 복제를 사용합니다.

. 필요 시 기존 클라이언트 서버에서 새 서버를 자동으로 생성합니다
. 파트너가 정의 및 제어하는 규칙에 따라 리소스를 자동으로 확장하기 위한 새로운 클라이언트 서버의 사전 예방적 자동 생성




== 공유 서버를 추가하기 위한 복제

클론은 기존 가상 머신의 복제본입니다. 클론 생성 기능은 게스트 운영 체제와 애플리케이션을 설치하는 데 시간이 오래 걸릴 수 있으므로 시간을 절약하고 관리자가 확장할 수 있도록 도와줍니다. 클론을 사용하면 단일 설치 및 구성 프로세스를 통해 가상 머신의 복제본을 여러 개 만들 수 있습니다. 이는 일반적으로 다음과 같습니다.

. 원하는 모든 응용 프로그램 및 설정을 TS 또는 TSD 서버에 설치합니다
. 소스 서버의 작업 공간 > 서버 섹션 > 기어 아이콘 으로 이동하고 클론 을 클릭합니다
. 클론 프로세스를 실행하도록 허용(일반적으로 45-90분)
. 마지막 단계에서는 복제된 서버를 활성화하여 새로운 연결을 수락하기 위해 RDS 풀에 넣습니다. 복제된 서버는 복제가 완료된 후 개별 구성이 필요할 수 있으므로 VDS는 관리자가 수동으로 서버를 회전시킬 때까지 기다립니다.


필요한 만큼 반복합니다.image:Cloning-Servers.gif[""]

.공유 세션 호스트 환경에서 사용자의 용량을 늘리기 위해 세션 호스트를 복제하는 작업은 몇 단계만으로 간단하게 수행할 수 있습니다.
. 복제할 세션 호스트를 선택하고 현재 시스템에 로그인되어 있는 사용자가 없는지 확인합니다.
. VDS에서 대상 클라이언트의 Workspace로 이동합니다. Servers(서버) 섹션으로 스크롤하여 Gear(기어) 아이콘을 클릭하고 Clone(클론) 을 선택합니다. 이 프로세스는 상당한 시간이 소요되며 소스 시스템이 오프라인 상태가 됩니다. 30분 이상 소요됩니다.
+
image:clone1.png[""]
image:clone2.png[""]

. 이 프로세스는 서버를 종료하고, 서버를 다른 이미지로 복제하고, 고객에게 다음 TS 번호로 이미지를 Sysprep 합니다. 서버 목록에서 서버가 _Type=Staged_and_Status=Activation Required_로 표시됩니다.
+
image:clone3.png[""]

. 서버에 로그온하여 서버가 프로덕션 준비가 되었는지 확인합니다.
+
image:clone4.png[""]

. 준비가 되면 활성화 를 클릭하여 서버를 세션 호스트 풀에 추가하여 사용자 연결 수락을 시작합니다.
+
image:clone5.png[""]





== VDS 클로닝 프로세스 정의

단계별 프로세스는 모든 클론 서버 작업의 VDS > 배포 > 작업 기록에 자세히 설명되어 있습니다. 이 프로세스는 20개 이상의 단계로 구성됩니다. 이 단계는 하이퍼바이저에 액세스하여 클론 프로세스를 시작하고 복제된 서버를 활성화하는 것으로 끝납니다. 클론 생성 프로세스에는 다음과 같은 주요 단계가 포함됩니다.

* DNS를 구성하고 서버 이름을 설정합니다
* StaticIP를 할당합니다
* 도메인에 추가
* Active Directory를 업데이트합니다
* VDS DB(CWMGR1의 SQL 인스턴스) 업데이트
* 클론에 대한 방화벽 규칙을 생성합니다


작업 내역뿐만 아니라 모든 복제 프로세스에 대한 세부 단계는 각 파트너의 가상 데스크톱 배포의 CWMGR1에 있는 CwVmAutomationService 로그에서 볼 수 있습니다. 이러한 로그 파일 검토는 문서화되어 있습니다 link:Troubleshooting.reviewing_vds_logs.html["여기"].



== 새 서버 자동 생성

이 VDS 기능은 정의된 사용자 수가 증가함에 따라 서버 단위 수를 자동으로 늘리도록 설계되었습니다.

파트너가 VDS(link:https://manage.cloudworkspace.com[""])> 클라이언트 > 개요 – VM 리소스 > 자동 스케일링. 자동 배율 조정을 활성화/비활성화할 수 있을 뿐만 아니라 각 클라이언트에 대한 사용자 지정 규칙(예: 번호/사용자/서버, 사용자당 추가 RAM 및 CPU당 사용자 수)을 생성할 수 있도록 여러 컨트롤이 표시됩니다.


NOTE: 위 가정에서는 전체 가상 데스크톱 배포에 대해 자동 복제가 활성화되었다고 가정합니다. 예를 들어 자동화된 모든 복제를 중지하려면 DCConfig를 사용하고 고급 창에서 서버 생성 -> 자동 클론 생성 설정 의 선택을 취소합니다.



=== 자동화된 클론 프로세스는 언제 실행됩니까?

일별 유지 관리가 실행되도록 구성된 경우 자동화된 클론 프로세스가 실행됩니다. 기본값은 자정이지만 편집할 수 있습니다. 일일 유지 보수의 일부는 각 리소스 풀에 대해 Change Resources 스레드를 실행하는 것입니다. Change Resources 스레드는 풀의 구성 사용자 수에 따라 필요한 공유 서버 수를 결정합니다(사용자 지정 가능, 서버당 10, 21, 30 등 사용자 수).



== "필요 시" 새 서버 자동 생성

이 VDS 기능을 사용하면 사용 가능한 리소스 풀에 추가 서버를 자동으로 "필요 시" 복제할 수 있습니다.

VDS 관리자는 VDS에 로그인하고 조직 또는 작업 영역 모듈 아래에서 특정 클라이언트를 찾고 개요 탭을 엽니다. 서버 타일에 모든 서버(TSD1, TS1, D1 등)가 나열됩니다. 개별 서버를 복제하려면 서버 이름의 맨 오른쪽에 있는 톱니바퀴를 클릭하고 클론 옵션을 선택하면 됩니다.

일반적으로 프로세스는 약 1시간 정도 걸립니다. 그러나 기간은 VM의 크기와 기본 하이퍼바이저의 사용 가능한 리소스에 따라 달라집니다. 복제되는 서버는 재부팅해야 하므로 파트너는 일반적으로 몇 시간 이후 또는 예약된 유지 관리 기간 동안 수행됩니다.

TSData 서버를 복제할 때, 단계 중 하나는 c:\Home, c:\Data 및 c:\Pro 폴더를 삭제하여 중복 파일이 없도록 하는 것입니다. 이 경우 클론 프로세스가 실패했습니다. 이 파일을 삭제하는 동안 문제가 발생했습니다. 이 오류는 모호합니다. 일반적으로 이는 열린 파일 또는 프로세스가 있기 때문에 클론 이벤트가 실패했음을 의미합니다. 다음 시도에서는 모든 AV를 비활성화하십시오(이 오류에 대한 설명이 있을 수 있음).
